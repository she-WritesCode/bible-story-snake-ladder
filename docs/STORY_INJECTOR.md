# Story Injector Architecture

The Bible Story Snake & Ladder game uses a JSON-driven story injector to decouple the core game engine from specific story content. This allows for diverse story experiences (David, Esther, Daniel, Joseph) within the same gameplay framework.

## Engine Responsibilities

- **Move Logic**: Handling dice rolls and character positioning.
- **Collision Detection**: Identifying if a player landed on a Snake, Ladder, or Gate.
- **Card Handling**: Selecting and displaying the correct card type based on square triggers.
- **Stat Management**: Updating Faith, Wisdom, Courage, etc., based on card outcomes.
- **Character Abilities**: Applying passive hooks to modify engine behavior.

## Story Injection Schema

### 1. Story Configuration

```typescript
interface StoryConfig {
  id: string;
  name: string;
  characterId: string;
  epochs: Epoch[];
  boardGeneration: {
    fixedSquares: Square[]; // Landmarks
    proceduralDensity: number; // Density of random interactions
  };
  cardPool: Card[];
}
```

### 2. Loading Process

1. **Selection**: User selects a Character (e.g., ESTHER).
2. **Boot**: `StoryLoader` fetches `ESTHER_STORY` config.
3. **Board Gen**: `GAME_BOARD` is generated by merging `fixedSquares` with procedural "fill-ins" based on story rules (e.g., Esther's "Identity Meter" squares).
4. **Deck Init**: `CARDS` pool is populated with story-specific Wisdom, Providence, and Temptation cards.
5. **UI Update**: Titles, colors, and background assets are swapped to match the story theme.

## Future Expansion

The JSON-driven approach allows for adding new stories without touching the core `App.tsx` logic. New stories only require:

- A new story file in `src/data/stories/`.
- Updated assets (optional but recommended for flavor).
- Registry entry in the `StoryLoader` map.
